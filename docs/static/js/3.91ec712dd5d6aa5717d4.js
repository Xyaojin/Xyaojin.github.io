webpackJsonp([3],{"5bqY":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("BO1k"),r=n.n(a),s=n("mvHQ"),i=n.n(s),l=n("olkN"),c={name:"cart",data:function(){return{value:"",sale:0}},beforeDestroy:function(){localStorage.cartItems=i()(l.a.state.cartItems)},computed:{items:function(){return l.a.state.cartItems},selectAllFlag:function(){return this.isCheckAllItems()},totalMoney:function(){var t=0,e=!0,n=!1,a=void 0;try{for(var s,i=r()(this.items);!(e=(s=i.next()).done);e=!0){var l=s.value;1===l.selectFlag&&(t+=l.count*l.price)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}return t.toString().replace(/\B(?=(\d{3})+$)/g,",")},afterSale:function(){var t=0,e=!0,n=!1,a=void 0;try{for(var s,i=r()(this.items);!(e=(s=i.next()).done);e=!0){var l=s.value;1===l.selectFlag&&(t+=l.count*l.price)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}return(t-this.sale).toString().replace(/\B(?=(\d{3})+$)/g,",")},itemCount:function(){return this.items.length},totalCount:function(){var t=0,e=!0,n=!1,a=void 0;try{for(var s,i=r()(this.items);!(e=(s=i.next()).done);e=!0){var l=s.value;1===l.selectFlag&&(t+=l.count)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}return t}},methods:{checkItem:function(t){t.selectFlag++,t.selectFlag%=2},checkAllItems:function(){if(this.isCheckAllItems()){var t=!0,e=!1,n=void 0;try{for(var a,s=r()(this.items);!(t=(a=s.next()).done);t=!0){a.value.selectFlag=0}}catch(t){e=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw n}}}else{var i=!0,l=!1,c=void 0;try{for(var o,u=r()(this.items);!(i=(o=u.next()).done);i=!0){o.value.selectFlag=1}}catch(t){l=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(l)throw c}}}},isCheckAllItems:function(){var t=0,e=!0,n=!1,a=void 0;try{for(var s,i=r()(this.items);!(e=(s=i.next()).done);e=!0){t+=s.value.selectFlag}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}return t===this.items.length},reduceItem:function(t){if(t.count-1==0){if(!0===confirm("确定要删除该商品吗？\n\n请确认！")){var e=!0,n=!1,a=void 0;try{for(var s,i=r()(this.items);!(e=(s=i.next()).done);e=!0){if(s.value===t)return void l.a.commit({type:"deleteItems",id:t.id,count:1})}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}}}else t.count--,l.a.commit({type:"reduceItem",count:1})},addItem:function(t){t.count++,l.a.commit({type:"addItem",count:1})},deleteItem:function(t){!0===confirm("确定要删除该商品吗？\n\n请确认！")&&l.a.commit({type:"deleteItems",id:t.id,count:t.count})},checkSale:function(){"0"===this.totalMoney?alert("请先选择商品！"):"88888888"===this.value?(this.sale=88,this.value=""):alert("优惠码错误，请重新输入！")},payItems:function(){if("0"===this.totalMoney)alert("还没有购买商品！");else{for(var t=l.a.state.cartItems.length-1;t>=0;t--)1===l.a.state.cartItems[t].selectFlag&&l.a.commit({type:"deleteItems",id:l.a.state.cartItems[t].id,count:l.a.state.cartItems[t].count});alert("支付成功!")}}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("table",{staticClass:"table"},[t._m(0),t._v(" "),0!==t.items.length?[n("tr",[n("td",{staticClass:"first",attrs:{width:"48%"}},[n("span",{class:t.selectAllFlag?"glyphicon glyphicon-check":"glyphicon glyphicon-unchecked",staticStyle:{"margin-right":"15px"},on:{click:t.checkAllItems}}),t._v("\n          商品信息\n        ")]),t._v(" "),n("td",{attrs:{width:"31%"}},[t._v("数量")]),t._v(" "),n("td",{attrs:{width:"9%"}},[t._v("小计")]),t._v(" "),n("td",{attrs:{width:"12%"}},[t._v("删除")])]),t._v(" "),t._l(t.items,function(e){return[n("tr",{key:e.id},[n("td",{staticClass:"first",attrs:{width:"48%"}},[n("span",{class:1===e.selectFlag?"glyphicon glyphicon-check":"glyphicon glyphicon-unchecked",on:{click:function(n){return t.checkItem(e)}}}),t._v(" "),n("img",{attrs:{src:e.img,width:"25px",height:"25px"}}),t._v(" "),n("span",{staticClass:"temp"},[t._v("\n              "+t._s(e.name)+"\n            ")])]),t._v(" "),n("td",{attrs:{width:"31%"}},[n("span",{staticClass:"glyphicon glyphicon-minus-sign",on:{click:function(n){return t.reduceItem(e)}}}),t._v("\n            "+t._s(e.count)+"\n            "),n("span",{staticClass:"glyphicon glyphicon-plus-sign",on:{click:function(n){return t.addItem(e)}}})]),t._v(" "),n("td",{attrs:{width:"9%"}},[t._v("￥"+t._s(e.price*e.count))]),t._v(" "),n("td",{attrs:{width:"12%"}},[n("span",{staticClass:"glyphicon glyphicon-trash",on:{click:function(n){return t.deleteItem(e)}}})])])]}),t._v(" "),n("tr",[n("td",{staticClass:"first",attrs:{colspan:"5"}},[t._v("\n          使用优惠码：\n          "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control form-control-lg onSale",attrs:{type:"text"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",on:{click:t.checkSale}},[t._v("兑换")])])]),t._v(" "),n("tr",[n("td",{staticClass:"totalCounts"},[t._v("共计"+t._s(t.totalCount)+"件商品")]),t._v(" "),n("td",{staticStyle:{"border-top":"none"}},[t._v("\n          应付金额￥"+t._s(t.totalMoney)+"\n          "),0!==t.sale?n("div",{staticClass:"saleMoney"},[t._v("\n            -"+t._s(t.sale)+" = "+t._s(t.afterSale)+"元\n          ")]):t._e()]),t._v(" "),n("td",{staticStyle:{"border-top":"none"},attrs:{colspan:"2"}},[n("button",{staticClass:"btn",on:{click:t.payItems}},[t._v("现在结算")])])])]:[t._m(1)]],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"first",staticStyle:{"border-top":"none"},attrs:{colspan:"5"}},[this._v("购物清单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"4"}},[this._v("购物车为空!")])])}]};var u=n("VU/8")(c,o,!1,function(t){n("kER7")},"data-v-bb467ff8",null);e.default=u.exports},kER7:function(t,e){}});
//# sourceMappingURL=3.91ec712dd5d6aa5717d4.js.map